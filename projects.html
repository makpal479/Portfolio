<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Мои мини-игры</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <header>
    <h1>Мои мини-игры</h1>
  </header>

  <main class="games-container">
    <div class="game-container">
      <h2>Осталось времени: <span id="time">30</span>s</h2>
      <h3>Счёт: <span id="score">0</span></h3>
      <h3>Рекорд: <span id="record">0</span></h3>
      <button id="startBtn" class="start-button">Старт</button>
      <button id="clickBtn" class="click-button" disabled>НАЖМИ МЕНЯ!</button>
      <br><br>
      <button id="pauseBtn" class="pause-button" disabled>Пауза</button>
      <button id="resetBtn" class="reset-button">Сбросить Счёт</button>
    </div>

    <div class="container">
      <h1>Генератор приключений</h1>
      <p id="adventure">Нажмите кнопку для генерации приключения.</p>
      <button onclick="generateAdventure()">Сгенерировать приключение</button>
      <button onclick="clearHistory()">Очистить историю</button>
      <h2>История приключений</h2>
      <ul id="history"></ul>
    </div>

    <div class="container">
      <h1>Угадай число</h1>
      <p>Компьютер загадал число от 1 до 100. Попробуйте угадать!</p>
      <input type="number" id="guessInput" min="1" max="100" placeholder="Введите число">
      <button onclick="checkGuess()">Проверить</button>
      <p id="message"></p>
      <p>Осталось попыток: <span id="attempts">10</span></p>
      <button onclick="resetGame()">Начать заново</button>
    </div>
  </main>

  <footer>
    <p>© 2025 Все права защищены</p>
  </footer>

  <script>
    let score = 0;
    let timeLeft = 30;
    let timer;
    let Paused = false;
    let Running = false;
    let record = Number(localStorage.getItem("clickerRecord")) || 0;
    document.getElementById("record").textContent = record;

    function startTimer() {
      Running = true;
      document.getElementById("clickBtn").disabled = false;
      document.getElementById("pauseBtn").disabled = false;
      document.getElementById("startBtn").disabled = true;

      timer = setInterval(() => {
        if (timeLeft > 0 && !Paused) {
          timeLeft--;
          document.getElementById("time").textContent = timeLeft;
        } else if (timeLeft === 0) {
          clearInterval(timer);
          Running = false;
          document.getElementById("clickBtn").disabled = true;
          alert(`Время вышло! Ваш итоговый счёт: ${score}`);

          if (score > record) {
            record = score;
            localStorage.setItem("clickerRecord", record);
            document.getElementById("record").textContent = record;
          }
        }
      }, 1000);
    }

    document.getElementById("startBtn").addEventListener("click", startTimer);
    document.getElementById("clickBtn").addEventListener("click", () => {
      if (timeLeft > 0 && !Paused) {
        score++;
        document.getElementById("score").textContent = score;
      }
    });
    document.getElementById("pauseBtn").addEventListener("click", () => {
      if (!Running) return;
      Paused = !Paused;
      document.getElementById("pauseBtn").textContent = Paused ? "Продолжить" : "Пауза";
    });
    document.getElementById("resetBtn").addEventListener("click", () => {
      score = 0;
      timeLeft = 30;
      Paused = false;
      Running = false;
      document.getElementById("score").textContent = score;
      document.getElementById("time").textContent = timeLeft;
      document.getElementById("pauseBtn").textContent = "Пауза";
      document.getElementById("clickBtn").disabled = true;
      document.getElementById("pauseBtn").disabled = true;
      document.getElementById("startBtn").disabled = false;
      clearInterval(timer);
    });

    const characters = [
      { name: "Рыцарь", prep: "Рыцарем" },
      { name: "Маг", prep: "Магом" },
      { name: "Вор", prep: "Вором" },
      { name: "Эльф", prep: "Эльфом" },
      { name: "Орк", prep: "Орком" }
    ];
    const locations = [
      { name: "Тёмный лес", prep: "Тёмном лесу" },
      { name: "Заброшенный замок", prep: "Заброшенном замке" },
      { name: "Подводное царство", prep: "Подводном царстве" },
      { name: "Горное убежище", prep: "Горном убежище" },
      { name: "Ледяная пещера", prep: "Ледяной пещере" }
    ];
    const villains = [
      { name: "Дракон", prep: "Драконом" },
      { name: "Колдун", prep: "Колдуном" },
      { name: "Гоблин", prep: "Гоблином" },
      { name: "Демон", prep: "Демоном" },
      { name: "Призрак", prep: "Призраком" }
    ];

    function getRandomElement(array) {
      return array[Math.floor(Math.random() * array.length)];
    }

    function generateAdventure() {
      const character = getRandomElement(characters);
      const location = getRandomElement(locations);
      const villain = getRandomElement(villains);
      const adventureText = `Ваш персонаж - ${character.name}, находящийся в ${location.prep}, сражается с ${villain.prep}.`;

      document.getElementById("adventure").textContent = adventureText;
      saveToHistory(adventureText);
    }

    function saveToHistory(adventure) {
      let history = JSON.parse(localStorage.getItem("adventureHistory")) || [];
      history.push(adventure);
      localStorage.setItem("adventureHistory", JSON.stringify(history));
      updateHistoryUI();
    }

    function updateHistoryUI() {
      const historyList = document.getElementById("history");
      historyList.innerHTML = "";
      let history = JSON.parse(localStorage.getItem("adventureHistory")) || [];
      history.forEach(entry => {
        let li = document.createElement("li");
        li.textContent = entry;
        historyList.appendChild(li);
      });
    }

    function clearHistory() {
      localStorage.removeItem("adventureHistory");
      updateHistoryUI();
    }

    updateHistoryUI();

    let randomNumber = Math.floor(Math.random() * 100) + 1;
    let attemptsLeft = 10;

    function checkGuess() {
      let userGuess = parseInt(document.getElementById("guessInput").value);
      let message = document.getElementById("message");

      if (isNaN(userGuess) || userGuess < 1 || userGuess > 100) {
        message.textContent = "Введите число от 1 до 100!";
        return;
      }

      attemptsLeft--;
      document.getElementById("attempts").textContent = attemptsLeft;

      if (userGuess === randomNumber) {
        message.textContent = "Поздравляем! Вы угадали число!";
        disableInput();
      } else if (userGuess < randomNumber) {
        message.textContent = "Загаданное число больше!";
      } else {
        message.textContent = "Загаданное число меньше!";
      }

      if (attemptsLeft === 0 && userGuess !== randomNumber) {
        message.textContent = `Вы проиграли! Число было ${randomNumber}.`;
        disableInput();
      }
    }

    function disableInput() {
      document.getElementById("guessInput").disabled = true;
    }

    function resetGame() {
      randomNumber = Math.floor(Math.random() * 100) + 1;
      attemptsLeft = 10;
      document.getElementById("attempts").textContent = attemptsLeft;
      document.getElementById("message").textContent = "";
      document.getElementById("guessInput").value = "";
      document.getElementById("guessInput").disabled = false;
    }
  </script>

</body>
</html>
